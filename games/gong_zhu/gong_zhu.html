<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Gong Zhu</title>

		<link href="../style.css" rel="stylesheet" type="text/css" />
		<link href="./gong_zhu.css" rel="stylesheet" type="text/css" />
		<style id="loading-css">
			body *:not(#loading) {
				opacity: 0;
			}
		</style>
		<link href="https://cdn.jsdelivr.net/gh/brandenleong1/utils@latest/themes/vertical_layout.css" rel="stylesheet" type="text/css" />
		<link href="https://cdn.jsdelivr.net/gh/brandenleong1/utils@latest/themes/colors.css" rel="stylesheet" type="text/css" />
		<!-- <link href="https://cdn.jsdelivr.net/gh/brandenleong1/utils@latest/themes/cards.css" rel="stylesheet" type="text/css" /> TODO -->
	</head>

	<body>
		<div class="content-header" id="title">Gong Zhu (Pig)</div>
		<!-- <div class="content-header" id="title" style="display: none;">Gong Zhu (Pig)</div> -->

		<!-- <div class="content-container-horizontal" style="font-size: 10em;">
			🂡 🂿 🃏 🃟
		</div>
		
		<div class="content-container-horizontal">
			<div class="playing-card rank-2 spades">
				<span class="rank">2</span>
				<span class="suit">&spades;</span>
			</div>
			<div class="playing-card rank-3 spades">
				<span class="rank">3</span>
				<span class="suit">&spades;</span>
			</div>
			<div class="playing-card rank-4 spades">
				<span class="rank">4</span>
				<span class="suit">&spades;</span>
			</div>
			<div class="playing-card rank-5 spades">
				<span class="rank">5</span>
				<span class="suit">&spades;</span>
			</div>
			<div class="playing-card rank-6 spades">
				<span class="rank">6</span>
				<span class="suit">&spades;</span>
			</div>
			<div class="playing-card rank-7 spades">
				<span class="rank">7</span>
				<span class="suit">&spades;</span>
			</div>
			<div class="playing-card rank-8 spades">
				<span class="rank">8</span>
				<span class="suit">&spades;</span>
			</div>
			<div class="playing-card rank-9 spades">
				<span class="rank">9</span>
				<span class="suit">&spades;</span>
			</div>
			<div class="playing-card rank-10 spades">
				<span class="rank">10</span>
				<span class="suit">&spades;</span>
			</div>
		</div>
		<div class="content-container-horizontal">
			<div class="playing-card rank-2 clubs">
				<span class="rank">2</span>
				<span class="suit">&clubs;</span>
			</div>
			<div class="playing-card rank-3 clubs">
				<span class="rank">3</span>
				<span class="suit">&clubs;</span>
			</div>
			<div class="playing-card rank-4 clubs">
				<span class="rank">4</span>
				<span class="suit">&clubs;</span>
			</div>
			<div class="playing-card rank-5 clubs">
				<span class="rank">5</span>
				<span class="suit">&clubs;</span>
			</div>
			<div class="playing-card rank-6 clubs">
				<span class="rank">6</span>
				<span class="suit">&clubs;</span>
			</div>
			<div class="playing-card rank-7 clubs">
				<span class="rank">7</span>
				<span class="suit">&clubs;</span>
			</div>
			<div class="playing-card rank-8 clubs">
				<span class="rank">8</span>
				<span class="suit">&clubs;</span>
			</div>
			<div class="playing-card rank-9 clubs">
				<span class="rank">9</span>
				<span class="suit">&clubs;</span>
			</div>
			<div class="playing-card rank-10 clubs">
				<span class="rank">10</span>
				<span class="suit">&clubs;</span>
			</div>
		</div>
		<div class="content-container-horizontal">
			<div class="playing-card rank-2 hearts">
				<span class="rank">2</span>
				<span class="suit">&hearts;</span>
			</div>
			<div class="playing-card rank-3 hearts">
				<span class="rank">3</span>
				<span class="suit">&hearts;</span>
			</div>
			<div class="playing-card rank-4 hearts">
				<span class="rank">4</span>
				<span class="suit">&hearts;</span>
			</div>
			<div class="playing-card rank-5 hearts">
				<span class="rank">5</span>
				<span class="suit">&hearts;</span>
			</div>
			<div class="playing-card rank-6 hearts">
				<span class="rank">6</span>
				<span class="suit">&hearts;</span>
			</div>
			<div class="playing-card rank-7 hearts">
				<span class="rank">7</span>
				<span class="suit">&hearts;</span>
			</div>
			<div class="playing-card rank-8 hearts">
				<span class="rank">8</span>
				<span class="suit">&hearts;</span>
			</div>
			<div class="playing-card rank-9 hearts">
				<span class="rank">9</span>
				<span class="suit">&hearts;</span>
			</div>
			<div class="playing-card rank-10 hearts">
				<span class="rank">10</span>
				<span class="suit">&hearts;</span>
			</div>
		</div>
		<div class="content-container-horizontal">
			<div class="playing-card rank-2 diams">
				<span class="rank">2</span>
				<span class="suit">&diams;</span>
			</div>
			<div class="playing-card rank-3 diams">
				<span class="rank">3</span>
				<span class="suit">&diams;</span>
			</div>
			<div class="playing-card rank-4 diams">
				<span class="rank">4</span>
				<span class="suit">&diams;</span>
			</div>
			<div class="playing-card rank-5 diams">
				<span class="rank">5</span>
				<span class="suit">&diams;</span>
			</div>
			<div class="playing-card rank-6 diams">
				<span class="rank">6</span>
				<span class="suit">&diams;</span>
			</div>
			<div class="playing-card rank-7 diams">
				<span class="rank">7</span>
				<span class="suit">&diams;</span>
			</div>
			<div class="playing-card rank-8 diams">
				<span class="rank">8</span>
				<span class="suit">&diams;</span>
			</div>
			<div class="playing-card rank-9 diams">
				<span class="rank">9</span>
				<span class="suit">&diams;</span>
			</div>
			<div class="playing-card rank-10 diams">
				<span class="rank">10</span>
				<span class="suit">&diams;</span>
			</div>
		</div> -->

		<div class="content-container-horizontal" id="username-input" style="align-items: center; justify-content: flex-start; display: none;">
			<input type="text" placeholder="Enter Username..." style="width: 500px;"></input>
			<div class="button-positive-2" id="submit-username-btn">Submit</div>
		</div>

		<div class="content-container-horizontal" id="username" style="align-items: center; justify-content: flex-start; display: none;">
		</div>

		<div class="content-container-vertical" id="lobby-menu" style="display: none;">
			<div class="content-container-horizontal" id="create-lobby-btn">
				<div class="button-positive-2" style="width: 100%; text-align: center;" onclick="showCreateLobbyPopup();">+ Create Lobby</div>
			</div>

			<div class="content-header-2" id="player-count" style="align-self: flex-start;">Online: <span>0</span></div>

			<div id="lobby-select"></div>
		</div>

		<div class="content-container-vertical" id="lobby" style="display: none;">
			<div class="content-container-horizontal" style="justify-content: space-between; align-items: center;">
				<div class="content-header" id="lobby-name"></div>
				<div class="content-container-horizontal">
					<div class="button-positive-2" id="btn-start-game" style="display: none;" onclick="startGame();">Start Game</div>
					<div class="button-positive-2" onclick="leaveLobby();">Leave</div>
				</div>
			</div>
			<div class="content-text" id="lobby-creation"></div>
			<div class="content-text" id="lobby-host"></div>
			<div class="content-text" id="lobby-users"></div>
			<div id="lobby-user-list"></div>

			<div class="content-break-vertical"></div>

			<div class="content-container-vertical" id="lobby-settings">
				<div class="content-header-2">Settings</div>
				<div class="content-table">
					<table class="no-border">
						<tr>
							<td hover-text="Set the policy for spectator rotation">Spectator Policy</td>
							<td><select id="lobby-settings-spectator-policy">
								<option value="disallowed" title="No spectators allowed" selected="selected">Disallowed</option>
								<option value="round-robin" title="Spectators rotate in the order they join">Round Robin</option>
								<option value="replace-losers" title="Only loser(s) rotate out">Replace Losers</option>
							</select></td>
						</tr>
						<tr>
							<td hover-text="If a player has a score less than or equal to the losing threshold, the game ends">Losing Threshold</td>
							<td><input type="number" id="lobby-settings-losing-threshold" max="0" value="-1000" /></td>
						</tr>
						<tr>
							<td hover-text="Enable the ×4 exposure round">Expose 3</td>
							<td><input type="checkbox" id="lobby-settings-expose-3" /></td>
						</tr>
						<tr>
							<td hover-text="Pig (Q♠) only turns positive when you take the sheep (J♦) and all the hearts">Zhu Yang Man Juan</td>
							<td><input type="checkbox" id="lobby-settings-zhu-yang-man-juan" /></td>
						</tr>
					</table>
				</div>
			</div>
		</div>

		<div class="content-container-horizontal" id="game" style="display: none; height: calc(100vh - 40px);">
		<!-- <div class="content-container-horizontal" id="game" style="height: calc(100vh - 40px);"> -->
			<div id="game-notes">
				<div class="content-container-vertical" id="game-notes-container">
					<div style="display: flex; align-items: center; justify-content: space-between;">
						<div class="content-header-2">Notes</div>
						<div class="button-positive-2" id="clear-notes-btn">Clear</div>
					</div>
					<div id="game-notes-cards"></div>
					<textarea placeholder="Write notes here..."></textarea>
					<div id="game-notes-btn"><span>&#x27E8</span></div>
				</div>
			</div>

			<div class="content-container-vertical" style="flex: 100 1 0; height: 100%; width: 0; row-gap: 10px;">
				<div class="content-container-vertical" id="game-gui" style="row-gap: 0;">
					<div class="game-gui-frame" id="game-gui-frame-game" style="display: none;">
						<div style="font-weight: bold;">Trick: <span id="game-gui-trick-count">1</span></div>
						<div class="content-break-vertical"></div>
						<div id="game-gui-hands"></div>
						<div class="content-break-vertical"></div>
						<div id="game-gui-shown-cards"></div>
						<div class="content-break-vertical" style="flex-grow: 1;"></div>

						<div id="game-gui-hands-self-wrapper">
							<div id="game-gui-hands-self"></div>
						</div>
					</div>

					<div class="game-gui-frame" id="game-gui-frame-leaderboard" style="display: none;">
						<div style="font-weight: bold; display: flex; width: 100%; justify-content: space-between;">
							<div>Round: <span id="game-gui-round-count"></span></div>
							<div>Limit: <span id="game-gui-limit-count"></span></div>
						</div>
						<div class="content-break-vertical"></div>
						<div id="game-gui-leaderboard"></div>
						<div class="content-break-vertical"></div>
						<div id="game-gui-help-next-round" style="display: none;"><span class="game-gui-server-owner">[Server Owner]</span>, enter <code>DEAL</code> to start the next round.</div>
						<div id="game-gui-help-next-game" style="display: none;">
							<div><span class="game-gui-server-owner">[Server Owner]</span>, enter <code>DEAL</code> to start the next game.</div>
							<div><span class="game-gui-server-owner">[Server Owner]</span>, enter <code>EXIT</code> to return to the lobby (change settings).</div>
						</div>
					</div>

					<div class="debug" id="game-gui-game-state"></div>
				</div>
				<div class="content-divider-horizontal"></div>
				<div id="game-console" style="flex: calc(100 * 0.2 / (1 - 0.2)) 1 0;">
					<div class="content-header-2"><b>Console</b></div>
					<div class="content-container-vertical" id="game-console-output"></div>
					<label style="display: flex; align-items: center; border-top: 1px solid var(--color_txt); cursor: text; font-family: monospace;"> >>
						<input type="text" id="game-console-input" style="font-family: monospace;" placeholder="Enter command (HELP for command list)" />
					</label>
				</div>
			</div>
			<div id="game-chat" style="width: 0; flex: calc(100 * 0.3 / (1 - 0.3)) 1 0;">
				<div class="content-header-2"><b>Chat</b></div>
				<div class="content-container-vertical" id="game-chat-output"></div>
				<label style="display: flex; align-items: center; border-top: 1px solid var(--color_txt); cursor: text;">
					<input type="text" id="game-chat-input" placeholder="Type to chat..." />
				</label>
			</div>
		</div>

		<div id="bottom-bar">
			<img id="help" src="https://brandenleong1.github.io/utils/icons/help.svg" />
			<img id="settings" src="https://brandenleong1.github.io/utils/icons/settings.svg" />
		</div>

		<div class="popup" id="popup-help">
			<div class="content-header">How To Play — Gong Zhu (Pig)</div>
			<div class="content-container-vertical">
				<div class="content-header-2">Objective</div>
				<div class="content-text">
					The objective of the game is to avoid being the first player whose score falls below the set threshold. The player who wins each trick takes the cards played during that trick, along with their associated point values (see Point Values).<br>
					All players start with zero points. Between rounds, points accumulate until at least one player has a score lower than the threshold, who lose the game.
				</div>

				<div class="content-header-2">The Cards</div>
				<div class="content-text">
					The game is played with one standard 52-card deck.<br>
					The cards in each suit rank from high to low: A K Q J 10 9 8 7 6 5 4 3 2.
				</div>

				<div class="content-header-2">Order of Play</div>
				<div class="content-text">
					Each player will be assigned a fixed position arranged in a circle, and turns are taken in an anticlockwise manner.
				</div>

				<div class="content-header-2">Point Values</div>
				<div class="content-text">
					The J♦ (goat) is worth +100 points.<br>
					The Q♠ (pig) is worth -100 points.<br>
					The 10♣ (transformer) doubles a player's points collected in a round. If at the end of a round, a player has collected the 10♣ and no other point cards, it is worth +50 points instead.<br>
					The Hearts (bloods) are worth -200 points in total:<br>
						<span class="indent">A♥ -50 points;</span><br>
						<span class="indent">K♥ -40 points;</span><br>
						<span class="indent">Q♥ -30 points;</span><br>
						<span class="indent">J♥ -20 points;</span><br>
						<span class="indent">10♥ through 5♥ are worth -10 points each;</span><br>
						<span class="indent">4♥ through 2♥ are worth 0 points.</span><br>
					All other cards are worth 0 points and do not play a part in scoring.<br>
					<br>
					If a player has collected all of the hearts, then the values of the hearts turn from negative to positive.<br>
					If a player has collected all of the hearts and the Q♠, then the values of the hearts and the Q♠ turn from negative to positive.<br>
						<span class="indent">If the setting "Zhu Yang Man Juan" is enabled, the player must collect both the J♦ and Q♠ for the Q♠ to turn positive.</span>
				</div>

				<div class="content-header-2">Exposure</div>
				<div class="content-text">
					A player may expose the J♦, Q♠, 10♣ and/or A♥ before each round begins. An exposed card may not be played the first time its suit is led, including the lead itself, unless it is a singleton.<br>
					Exposing a card doubles its effect and associated point values. Exposing the A♥ applies the multiplier to all of the hearts.<br>
						<span class="indent">If the setting "Expose 3" is enabled, there are two stages of exposure. In the first stage, only three cards are dealt, and exposing during this stage yields a 4x multipler. The rest of the cards are dealt for the second stage, which follows the above rule.</span>
				</div>

				<div class="content-header-2">Play</div>
				<div class="content-text">
					In each trick, the suit is determined by the leading card. The winner of the previous trick plays the first card in the next, and in the first trick, the player with the 2♠ leads.<br>
					All subsequent players in the order determined (see Order of Play) each play a card:<br>
						<span class="indent">If the player has a card of the leading suit, they must play a card of this suit, with restrictions applied to exposed cards.</span><br>
						<span class="indent">If the player does not have a card of the leading suit, they may play any card of their choosing.</span><br>
					The player who played the highest-ranking card of the leading suit wins the trick and collects all played cards (cards with zero point value can be discarded), then starts the next trick.<br>
				</div>
			</div>
		</div>
		<div class="popup" id="popup-settings">
			<div class="content-header">Settings</div>
			<div style="display: grid;">

				<div class="content-text" style="grid-column: 1 / 2;">
					<span class="button-positive" id="theme-btn" style="padding: 0;">Change Theme:</span>
				</div>
				<span style="position: relative; display: inline-flex; align-items: center; width: 65px; overflow-y: hidden; grid-column: 2 / 3;">
					<span id="theme-label-1" style="position: absolute; max-width: 60px; overflow-x: hidden; text-overflow: ellipsis;"></span>
					<span id="theme-label-2" style="max-width: 60px; overflow-x: hidden; text-overflow: ellipsis;"></span>
				</span>

				<div class="content-text" style="grid-column: 1 / 2;">Console Size:</div>
				<input type="range" id="console-size-slider" min="10" max="90" value="20" style="grid-column: 2 / 3;" />

				<div class="content-text" style="grid-column: 1 / 2;">Chat Size:</div>
				<input type="range" id="chat-size-slider" min="10" max="90" value="30" style="grid-column: 2 / 3;" />

				<div class="content-text" style="grid-column: 1 / 2;">Symbolic Cards:</div>
				<input type="checkbox" id="symbolic-cards-checkbox" style="width: 24px; margin: 3px; grid-column: 2 / 3;" />

				<div class="content-text" style="grid-column: 1 / 2;">GUI Size:</div>
				<input type="range" id="gui-size-slider" min="0.5" max="2" value="1" step="0.05" style="grid-column: 2 / 3;" />

			</div>
		</div>
		<div class="popup" id="popup-create-lobby">
			<div class="content-header">Create Lobby</div>
			<div class="content-table">
				<table class="no-border">
					<tr>
						<td>Lobby Name</td>
						<td><input type="text" id="create-lobby-name" placeholder="Lobby Name" /></td>
					</tr>
				</table>
			</div>
			<div class="content-container-horizontal">
				<div class="button-positive-2">Create</div>
			</div>
		</div>
		<div class="popup" id="popup-load-lobby">
			<div class="content-header" style="display: flex;"><span>Lobby [</span><span id="load-lobby-name"></span><span>]</span></div>
			<div class="content-text" id="load-lobby-creation" style="align-self: flex-start;"></div>
			<div class="content-text" id="load-lobby-host" style="align-self: flex-start;"></div>
			<div class="content-text" id="load-lobby-users" style="align-self: flex-start;"></div>
			<div id="load-lobby-user-list"></div>
			<div class="button-positive-2">Join</div>
		</div>

		<div id="loading"></div>

		<script src="./script.js"></script>

		<script src="https://cdn.jsdelivr.net/gh/brandenleong1/utils@latest/utils/math.js"></script>
		<script src="https://cdn.jsdelivr.net/gh/brandenleong1/utils@latest/utils/rate_funcs.js"></script>
		<script src="https://cdn.jsdelivr.net/gh/brandenleong1/utils@latest/utils/utils.js"></script>
		<script src="https://cdn.jsdelivr.net/gh/brandenleong1/utils@latest/utils/animate.js"></script>
		<script src="https://cdn.jsdelivr.net/gh/brandenleong1/utils@latest/utils/cookies.js"></script>
		<script src="https://cdn.jsdelivr.net/gh/brandenleong1/utils@latest/utils/math_jax.js"></script>
		<script src="https://cdn.jsdelivr.net/gh/brandenleong1/utils@latest/utils/math_jax_config.js"></script>
		<script src="https://cdn.jsdelivr.net/gh/brandenleong1/utils@latest/utils/themes.js"></script>
		<script src="https://cdn.jsdelivr.net/gh/brandenleong1/utils@latest/utils/cards.js"></script>
		<script src="https://cdn.jsdelivr.net/gh/brandenleong1/utils@latest/themes/popup.js"></script>

		<script src="../game_init.js"></script>
	</body>
</html>